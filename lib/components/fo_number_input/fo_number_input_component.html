<label>{{label}}</label>
<div>
    <span>{{leadingText}}&nbsp;</span>
    <material-button clear-size
                     dense
                     [disabled]="disabled || (value != null && value <= min)"
                     (mousedown)="onMouseDown(-step)"
                     (touchstart)="onMouseDown(-step)"
                     (keydown)="onKeyDown($event, -step)">
        <material-icon icon="remove"
                       size="medium"></material-icon>
    </material-button>
    <span class="clickable"
          [class.disabled]="disabled"
          id="valueOutput"
          (click)="popupVisible = !disabled"
          popupSource
          #source="popupSource">{{formattedValue}}</span>
    <material-button clear-size
                     dense
                     [disabled]="disabled || (value != null && value >= max)"
                     (mousedown)="onMouseDown(step)"
                     (touchstart)="onMouseDown(step)"
                     (keydown)="onKeyDown($event, step)">
        <material-icon icon="add"
                       size="medium"></material-icon>
    </material-button>
    <span>&nbsp;{{trailingText}}</span>
</div>

<material-popup [(visible)]="popupVisible"
                [source]="source">
    <div class="row padding-top-small">
        <div class="col">
            <material-input type="number"
                            [ngFormControl]="numberInputControl"
                            [label]="msg.enter_value() | name"
                            [disabled]="disabled"
                            floatingLabel
                            [ngModel]="value"
                            (ngModelChange)="setValueClamped($event)"></material-input>
        </div>
    </div>
</material-popup>