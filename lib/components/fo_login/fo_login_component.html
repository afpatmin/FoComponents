<fo-modal
        *ngIf="visible && client != null"
        [visible]="true"
        [whiteHeader]="true"
        [showCloseButton]="false"
        [titleImageUrl]="titleImageUrl"
        [error]="errorMessage">
    <div class="padder">
        <h3 class="title margin-bottom-x-small margin-top-x-small">{{state}}</h3>
        <div class="login-container" *ngIf="state == msg.login()">
            <form>
                <material-input
                        [disabled]="client.loading"
                        [label]="msg.username()"
                        [(ngModel)]="username"
                        (keyup)="onKeyUp($event)">
                </material-input>
                <material-input
                        [disabled]="client.loading"
                        type="password"
                        [label]="msg.password()"
                        [displayBottomPanel]="false"
                        [(ngModel)]="password"
                        (keyup)="onKeyUp($event)">
                </material-input>
            </form>
            <p *ngIf="showForgotPassword" class="forgot-password" (click)="setState(msg.forgot_password())">{{msg.forgot_password()}}?</p>
            <div class="button-container">
                <material-button
                        raised
                        clear-size
                        [disabled]="client.loading || username.isEmpty || password.isEmpty"
                        (trigger)="onLogin()">
                    {{msg.login()}}
                </material-button>
            </div>
            <div class="row" *ngIf="altUrl != null">
                <div class="col text-center">
                    <p><a [href]="altUrl">{{altUrlTitle}}</a></p>
                </div>
            </div>
        </div>
        <div class="login-container" *ngIf="state == msg.forgot_password()">
            <p>{{msg.forgot_password_description()}}</p>
            <material-input
                    [disabled]="client.loading"
                    [label]="msg.username()" floatingLabel
                    [(ngModel)]="username"
                    (keyup)="onRecoverPasswordKeyUp($event)">
            </material-input>
            <div class="button-container">
                <material-button
                        raised
                        clear-size
                        (trigger)="setState(msg.login())">
                    {{msg.back()}}
                </material-button>
                <material-button
                        raised
                        clear-size
                        [disabled]="client.loading || username.isEmpty || recoverPasswordSent"
                        (trigger)="onRecoverPassword()">
                    {{msg.send()}}
                </material-button>
            </div>
        </div>
        <div class="login-container" *ngIf="state == msg.reset_password()">
            <p>{{msg.reset_password_description()}}</p>
            <material-input
                    [disabled]="client.loading"
                    [label]="token" floatingLabel
                    [(ngModel)]="token">
            </material-input>
            <material-input
                    [disabled]="client.loading"
                    [label]="msg.new_password()" floatingLabel
                    [(ngModel)]="password">
            </material-input>
            <div class="button-container">
                <material-button
                        raised
                        clear-size
                        [disabled]="client.loading || password.isEmpty || token.isEmpty"
                        (trigger)="onUpdatePassword()">
                    {{msg.save()}}
                </material-button>
            </div>
        </div>
    </div>
</fo-modal>